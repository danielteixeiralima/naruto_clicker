:root {
    --bg-color: #2c2c2c;
    --panel-bg: #f5e6ca;
    /* Cor de pergaminho */
    --panel-border: #4a3b2a;
    --primary-orange: #ff6600;
    --text-color: #333;
    --gold-color: #ffd700;
    --dps-color: #ff4500;
}

/* For칞ar renderiza칞칚o de alta qualidade para todas as imagens */
img {
    image-rendering: auto;
    image-rendering: -webkit-optimize-contrast;
    -ms-interpolation-mode: bicubic;
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    will-change: transform;
}

/* For칞ar acelera칞칚o de hardware para melhor qualidade */
canvas,
img,
video {
    transform: translate3d(0, 0, 0);
    -webkit-transform: translate3d(0, 0, 0);
}

body {
    margin: 0;
    padding: 0;
    font-family: 'Roboto', sans-serif;
    background: #1a1a1a;
    color: var(--text-color);
    overflow: hidden;
    user-select: none;
    height: 100vh;
    width: 100vw;
}

/* Background fixo do jogo - n칚o afetado por zoom */
body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image: url('../img/battle_bg.png');
    background-size: cover;
    background-position: center;
    z-index: -1;
    pointer-events: none;
    zoom: 1;
}



.game-container {
    display: flex;
    /* Tamanho base - ser치 ajustado pelo anti_zoom.js */
    width: 117.65vw;
    height: 117.65vh;
    max-width: none;
    max-height: none;
    padding: 20px;
    box-sizing: border-box;
    margin: 0;
    position: relative;
    /* Zoom base de 85% - anti_zoom.js compensa mudan칞as do navegador */
    zoom: 0.85;
}

.panel {
    background-color: var(--panel-bg);
    border: 5px solid var(--panel-border);
    border-radius: 8px;
    margin: 0 15px;
    /* Espa칞o entre as faixas */
    padding: 15px;
    display: flex;
    flex-direction: column;
    position: relative;
    box-shadow: inset 0 0 50px rgba(0, 0, 0, 0.1);
}

.panel::before {
    content: "";
    /* Textura de papel */
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image: url('https://www.transparenttextures.com/patterns/aged-paper.png');
    opacity: 0.4;
    pointer-events: none;
    z-index: 0;
}

.left-panel {
    flex: 2.5;
    /* Aumentado de 2.2 para 2.5 para dar mais espa칞o */
    min-width: 480px;
    /* Aumentado de 450px para 480px */
    z-index: 1;
}

/* Mais larga */
.center-panel {
    flex: 6;
    /* Abre muito mais espa칞o no meio */
    z-index: 1;
    background-color: rgba(255, 255, 255, 0.1);
    border: none;
    box-shadow: none;
    background: none;
}

/* Center panel is transparent to see bg */

.center-panel .battle-arena {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    /* Centraliza verticalmente o conjunto */
    align-items: center;
    position: relative;
    padding-top: 0;
}

.right-panel {
    flex: 1.2;
    min-width: 280px;
    z-index: 1;
    display: flex;
    flex-direction: column;
    padding: 20px;
    background-image: url('https://www.transparenttextures.com/patterns/aged-paper.png'),
        linear-gradient(to bottom, #f5e6ca 0%, #e8d5b5 100%);
    border-left: 5px solid #4a3b2a;
    box-shadow: -5px 0 15px rgba(0, 0, 0, 0.3);
    position: relative;
}

.right-panel h3 {
    text-align: center;
    font-size: 1.8em;
    color: #4e342e;
    border-bottom: 2px solid #8d6e63;
    padding-bottom: 10px;
    margin-bottom: 20px;
    text-transform: uppercase;
}

#stats-list {
    list-style: none;
    padding: 0;
    margin: 0;
    flex: 1;
}

#stats-list li {
    font-family: 'Roboto', sans-serif;
    font-size: 1.1em;
    padding: 12px 10px;
    border-bottom: 1px dashed #a1887f;
    color: #3e2723;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

#stats-list li span {
    font-family: 'Bangers', cursive;
    color: #bf360c;
    font-size: 1.2em;
}

/* Estiliza칞칚o do Bot칚o de Reset */
.reset-container {
    margin-top: auto;
    padding-top: 20px;
    text-align: center;
}

.reset-btn {
    background: linear-gradient(to bottom, #d32f2f 0%, #b71c1c 100%);
    color: white;
    border: 2px solid #7f0000;
    padding: 12px 20px;
    font-family: 'Bangers', cursive;
    font-size: 1.2em;
    border-radius: 8px;
    cursor: pointer;
    box-shadow: 0 4px 0 #5f0000;
    transition: all 0.1s;
    width: 100%;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
}

.reset-btn:hover {
    background: linear-gradient(to bottom, #e53935 0%, #c62828 100%);
}

.reset-btn:active {
    transform: translateY(4px);
    box-shadow: none;
}

/* Scroll Lists */
.scroll-content {
    overflow-y: auto;
    overflow-x: hidden;
    /* Remove a barra horizontal */
    flex: 1;
    padding-right: 15px;
    /* Aumentado de 5px para 15px para afastar a barra dos cards */
}

.scroll-content::-webkit-scrollbar {
    width: 8px;
}

.scroll-content::-webkit-scrollbar-thumb {
    background: var(--primary-orange);
    border-radius: 4px;
}

/* Heroes List Expanded */

/* Container de Moedas */
.currency-display-container {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
}

.gold-display-left {
    font-family: 'Bangers', cursive;
    font-size: 2.5em;
    color: var(--gold-color);
    text-shadow: 2px 2px 0 #000;
    text-align: center;
    background: rgba(0, 0, 0, 0.6);
    padding: 10px;
    border-radius: 10px;
    border: 2px solid #8b4513;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

.diamonds-display-left {
    font-family: 'Bangers', cursive;
    font-size: 2.5em;
    color: #00d4ff;
    text-shadow: 2px 2px 0 #000, 0 0 10px rgba(0, 212, 255, 0.5);
    text-align: center;
    background: rgba(0, 0, 0, 0.6);
    padding: 10px;
    border-radius: 10px;
    border: 2px solid #0088cc;
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
}

/* Header Panel (Equipe Ninja) */
.header-panel {
    border-bottom: 2px solid #8b4513;
    margin-bottom: 15px;
    padding-bottom: 10px;
}

.header-panel h2 {
    font-family: 'Shojumaru', cursive;
    margin: 0;
    color: #b33e00;
    font-size: 1.8em;
    text-align: center;
}

/* Stats Display (DPS/Click) */
.stats-display-container {
    display: flex;
    justify-content: space-around;
    gap: 10px;
    margin-top: 10px;
}

.dps-display,
.click-display {
    flex: 1;
    background: linear-gradient(135deg, #444, #222);
    border: 2px solid #ff9800;
    border-radius: 8px;
    padding: 8px 5px;
    color: #fff;
    font-family: 'Bangers', cursive;
    font-size: 1.4em;
    text-align: center;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    text-shadow: 1px 1px 2px #000;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.dps-display span,
.click-display span {
    color: #ffd700;
    font-size: 1.1em;
}

.dps-display {
    border-color: #ff5722;
}

.click-display {
    border-color: #2196f3;
}

/* Heroes List Expanded */
.hero-item {
    background: rgba(255, 255, 255, 0.85);
    /* Mais opaco para leitura */
    border: 3px solid #8b4513;
    border-radius: 8px;
    margin-bottom: 12px;
    padding: 15px;
    /* Box maior */
    display: flex;
    align-items: center;
    transition: transform 0.1s;
    cursor: pointer;
    min-height: 80px;
    /* Garante altura */
}

.hero-item:hover {
    transform: scale(1.02);
    background: rgba(255, 255, 255, 0.95);
}

.hero-item.disabled {
    filter: grayscale(1);
    opacity: 0.7;
    cursor: not-allowed;
}

/* Indicador de Surto do Naruto */
.hero-item.surge-active {
    box-shadow: 0 0 20px rgba(255, 100, 0, 0.8);
    animation: surge-pulse 1s infinite;
}

@keyframes surge-pulse {

    0%,
    100% {
        box-shadow: 0 0 20px rgba(255, 100, 0, 0.8);
    }

    50% {
        box-shadow: 0 0 30px rgba(255, 100, 0, 1);
    }
}

/* Efeito visual na imagem do Naruto durante surto */
.hero-full-body-img.surge-active-img {
    box-shadow: 0 0 25px rgba(255, 140, 0, 1), 0 0 40px rgba(255, 100, 0, 0.8);
    border-color: #ff8c00 !important;
    animation: surge-img-pulse 0.8s infinite;
}

@keyframes surge-img-pulse {

    0%,
    100% {
        box-shadow: 0 0 25px rgba(255, 140, 0, 1), 0 0 40px rgba(255, 100, 0, 0.8);
        transform: scale(1);
    }

    50% {
        box-shadow: 0 0 35px rgba(255, 140, 0, 1), 0 0 50px rgba(255, 100, 0, 1);
        transform: scale(1.05);
    }
}

.hero-img {
    width: 80px;
    /* Imagem bem maior */
    height: 80px;
    border-radius: 10px;
    /* Quadrado arredondado em vez de circulo para mostrar mais arte */
    border: 3px solid var(--panel-border);
    margin-right: 15px;
    background: #ccc;
    flex-shrink: 0;
}

.hero-info {
    flex: 1;
}

.hero-name {
    font-weight: bold;
    font-family: 'Shojumaru', cursive;
    font-size: 1.4em;
    color: #b33e00;
    margin-bottom: 5px;
}

.hero-stats {
    font-size: 1.1em;
    color: #333;
    font-weight: bold;
}

.hero-cost {
    font-weight: bold;
    color: #d68910;
    font-size: 1.2em;
}

.hero-level {
    background: var(--panel-border);
    color: #fff;
    padding: 4px 10px;
    border-radius: 12px;
    font-size: 0.9em;
    float: right;
    margin-left: 10px;
}

/* Monster & Battle */
.monster-container {
    text-align: center;
    position: relative;
    cursor: url('../img/kunai_cursor.png') 0 0, crosshair;
}

.monster-visual {
    width: 310px;
    /* Reduzido em 30% (440px 칑 0.7 = 308px, arredondado para 310px) */
    height: 310px;
    margin: 80px auto 0 auto;
    /* Aumenta espa칞o superior para descer o ninja conforme pedido */
    transition: transform 0.05s;
    display: flex;
    align-items: center;
    justify-content: center;
}

.monster-visual img {
    max-width: 100%;
    max-height: 100%;
    filter: drop-shadow(0 10px 10px rgba(0, 0, 0, 0.5));
}

.monster-visual:active {
    transform: scale(0.95);
}

.shake {
    animation: shake 0.2s;
}

.hit-scale {
    animation: hitScale 0.1s ease-out;
}

@keyframes hitScale {
    0% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.15);
    }

    /* Aumenta levemente */
    100% {
        transform: scale(1);
    }
}

@keyframes shake {
    0% {
        transform: translate(1px, 1px) rotate(0deg);
    }

    10% {
        transform: translate(-1px, -2px) rotate(-1deg);
    }

    20% {
        transform: translate(-3px, 0px) rotate(1deg);
    }

    30% {
        transform: translate(3px, 2px) rotate(0deg);
    }

    40% {
        transform: translate(1px, -1px) rotate(1deg);
    }

    50% {
        transform: translate(-1px, 2px) rotate(-1deg);
    }

    60% {
        transform: translate(-3px, 1px) rotate(0deg);
    }

    70% {
        transform: translate(3px, 1px) rotate(-1deg);
    }

    80% {
        transform: translate(-1px, -1px) rotate(1deg);
    }

    90% {
        transform: translate(1px, 2px) rotate(0deg);
    }

    100% {
        transform: translate(1px, -2px) rotate(-1deg);
    }
}

.monster-hp-bar {
    width: 265px;
    /* Reduzido em 30% para acompanhar o monstro (380px 칑 0.7 = 266px, arredondado para 265px) */
    height: 22px;
    background: #555;
    border: 3px solid #000;
    border-radius: 12px;
    overflow: hidden;
    margin: 5px auto;
}

#hp-fill {
    height: 100%;
    background: linear-gradient(90deg, #ff0000, #ff6600);
    transition: width 0.1s linear;
}

.monster-hp-text {
    font-family: 'Bangers', cursive;
    font-size: 1.5em;
    color: #fff;
    text-shadow: 2px 2px 0 #000;
    margin-top: -22px;
    position: relative;
    z-index: 2;
}

/* Monster Name and Level Display */
.monster-info {
    text-align: center;
    margin-top: 15px;
    pointer-events: none;
}

.monster-name {
    font-family: 'Shojumaru', cursive;
    font-size: 2.2em;
    color: #ff6600;
    text-shadow: 3px 3px 0 #000, 0 0 10px rgba(255, 102, 0, 0.5);
    margin-bottom: 5px;
    font-weight: bold;
    letter-spacing: 2px;
}

.monster-level {
    font-family: 'Bangers', cursive;
    font-size: 1.6em;
    color: #ffd700;
    text-shadow: 2px 2px 0 #000;
    background: rgba(0, 0, 0, 0.6);
    display: inline-block;
    padding: 5px 15px;
    border-radius: 8px;
    border: 2px solid #8b4513;
}

#damage-numbers-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 999;
    /* Container acima do inimigo */
}

.damage-number {
    position: absolute;
    font-family: 'Bangers', cursive;
    font-size: 2em;
    color: #fff;
    text-shadow: 2px 2px 0 #000;
    animation: floatUp 1s ease-out forwards;
    z-index: 1000;
    /* Sempre na frente do inimigo */
}

.damage-crit {
    color: #ff0000;
    font-size: 3em;
}

/* Dano Elemental - Cores por Elemento */
.damage-vento {
    color: #00ff00;
    text-shadow: 2px 2px 0 #000, 0 0 10px #00ff00;
}

.damage-trovao,
.damage-raio {
    color: #ffff00;
    text-shadow: 2px 2px 0 #000, 0 0 10px #ffff00;
}

.damage-fogo {
    color: #ff4500;
    text-shadow: 2px 2px 0 #000, 0 0 10px #ff4500;
}

.damage-agua {
    color: #00bfff;
    text-shadow: 2px 2px 0 #000, 0 0 10px #00bfff;
}

.damage-terra {
    color: #8b4513;
    text-shadow: 2px 2px 0 #000, 0 0 10px #ffa500;
}

@keyframes floatUp {
    0% {
        opacity: 1;
        transform: translateY(0) scale(1);
    }

    100% {
        opacity: 0;
        transform: translateY(-100px) scale(1.2);
    }
}

/* Anima칞칚o de Moedas de Ouro */
.gold-coin {
    position: absolute;
    font-size: 2em;
    color: #ffd700;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8),
        0 0 10px rgba(255, 215, 0, 0.6);
    pointer-events: none;
    z-index: 100;
    animation: coinFall 0.8s ease-out forwards;
}

@keyframes coinFall {
    0% {
        opacity: 1;
        transform: translateY(0) rotate(0deg) scale(1);
    }

    60% {
        opacity: 1;
        transform: translateY(80px) rotate(180deg) scale(1.1);
    }

    100% {
        opacity: 0;
        transform: translateY(120px) rotate(360deg) scale(0.6);
    }
}

/* Headers & Fonts */
h2,
h3 {
    font-family: 'Shojumaru', cursive;
    letter-spacing: 1px;
    margin: 0 0 10px 0;
    color: #2c2c2c;
}

.gold-display {
    font-family: 'Bangers', cursive;
    font-size: 2em;
    color: var(--gold-color);
    text-shadow: 2px 2px 0 #000;
    background: rgba(0, 0, 0, 0.6);
    padding: 10px;
    border-radius: 10px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.gold-icon {
    height: 30px;
    margin-right: 10px;
}

/* Log Removido, adicionando estilos de Arena */
.arena-selector-container {
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 10px;
    background: rgba(0, 0, 0, 0.5);
    padding: 10px;
    border-radius: 15px;
    border: 2px solid #8b4513;
}

.nav-btn {
    background: #ff6600;
    border: 2px solid #4a0000;
    color: white;
    font-weight: bold;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    cursor: pointer;
    font-family: 'Bangers', cursive;
    font-size: 1.2em;
}

.nav-btn:hover {
    background: #ff8533;
}

.nav-btn:active {
    transform: scale(0.95);
}

.arenas-scroll {
    flex: 1;
    overflow: hidden;
    margin: 0 10px;
    height: 60px;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

#arenas-display {
    display: flex;
    gap: 10px;
    transition: transform 0.3s ease;
}

.arena-box {
    width: 50px;
    height: 50px;
    background: #4a3b2a;
    border: 2px solid #8b4513;
    color: #ffd700;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Bangers', cursive;
    font-size: 1.2em;
    border-radius: 5px;
    cursor: pointer;
    flex-shrink: 0;
    opacity: 0.6;
}

.arena-box.active {
    background: #ff6600;
    border-color: #ffff00;
    transform: scale(1.1);
    opacity: 1;
    box-shadow: 0 0 10px #ff6600;
}

.arena-box.locked {
    background: #222;
    color: #555;
    cursor: not-allowed;
    border-color: #333;
}

/* Upgrade Boxes Compact */
.upgrades-row {
    display: flex;
    gap: 5px;
    margin-top: 5px;
    width: 100%;
    padding-left: 95px;
    /* Alinhar com o nome do heroi (img width + margin) */
}

.upgrade-box {
    width: 30px;
    height: 30px;
    background-color: #4a3b2a;
    border: 2px solid #8b4513;
    border-radius: 4px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 1.2em;
    position: relative;
    transition: all 0.2s;
}

.upgrade-box.locked {
    opacity: 0;
    /* Totalmente invis칤vel se bloqueado (se n칚o tiver nivel 20, 40...) */
    pointer-events: none;
}

.upgrade-box.available {
    background-color: #5d4a35;
    border-color: #ffd700;
    /* Borda dourada para indicar disponivel */
    animation: pulseBorder 2s infinite;
}

.upgrade-box.bought {
    background-color: #228b22;
    /* Verde comprado */
    border-color: #00ff00;
    box-shadow: 0 0 5px #00ff00;
    cursor: default;
}

/* Tooltip (S칩 no hover) */
.tooltip {
    visibility: hidden;
    background-color: rgba(0, 0, 0, 0.95);
    color: #fff;
    text-align: left;
    border-radius: 6px;
    padding: 8px;
    position: absolute;
    z-index: 1000;
    bottom: 125%;
    left: 50%;
    margin-left: -60px;
    width: 150px;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.5);
    border: 1px solid #ffd700;
    font-size: 0.8em;
    font-family: 'Roboto', sans-serif;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.2s;
}

.upgrade-box:hover .tooltip {
    visibility: visible;
    opacity: 1;
}

@keyframes pulseBorder {
    0% {
        border-color: #ffd700;
    }

    50% {
        border-color: #ffaa00;
    }

    100% {
        border-color: #ffd700;
    }
}

.zone-progress-info {
    text-align: center;
    font-family: 'Shojumaru', cursive;
    color: #ffd700;
    background: transparent;
    padding: 0;
    margin-bottom: 20px;
    /* Mais espa칞o para a barra de vida abaixo */
    margin-top: -20px;
    /* Sobe um pouco mais */
    font-size: 2.8em;
    /* Aumentado levemente */
    text-shadow: 4px 4px 0 #000;
    z-index: 10;
}

/* Boss Timer */
.boss-timer {
    text-align: center;
    font-family: 'Bangers', cursive;
    color: #ff4444;
    background: rgba(0, 0, 0, 0.7);
    padding: 10px 20px;
    margin: -10px auto 20px auto;
    border-radius: 15px;
    font-size: 2.5em;
    text-shadow: 3px 3px 0 #000;
    border: 3px solid #ff0000;
    box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
    width: fit-content;
    animation: timerPulse 1s infinite;
}

.boss-timer.warning {
    animation: timerWarning 0.5s infinite;
    color: #ff0000;
    border-color: #ff0000;
}

@keyframes timerPulse {

    0%,
    100% {
        transform: scale(1);
    }

    50% {
        transform: scale(1.05);
    }
}

@keyframes timerWarning {

    0%,
    100% {
        transform: scale(1);
        box-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
    }

    50% {
        transform: scale(1.1);
        box-shadow: 0 0 30px rgba(255, 0, 0, 1);
    }
}


/* HERO ITEM REDESIGN (Reference Style) */
.hero-item-new {
    background: #fdf5e6;
    /* Cor de papiro claro */
    border-radius: 12px;
    margin-bottom: 25px;
    padding: 10px;
    position: relative;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
    border: 2px solid #dba669;
    min-height: 180px;
    /* Garante espa칞o para imagem full */
}

/* Header: Nome e Nivel */
.hero-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-end;
    /* Alinha na base do texto */
    margin-bottom: 5px;
    border-bottom: 1px dashed #dba669;
    padding-bottom: 5px;
}

.hero-name-title {
    font-family: 'Shojumaru', cursive;
    font-size: 1.6em;
    color: #333;
    text-shadow: 1px 1px 0 #fff;
    margin-left: 5px;
}

.hero-level-badge {
    font-family: 'Bangers', cursive;
    font-size: 2em;
    color: #fff;
    text-shadow: 2px 2px 0 #000;
}

/* Body: Esquerda (Botao + Skills) | Direita (Imagem) */
.hero-body-row {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
}

.left-section {
    display: flex;
    flex-direction: row;
    /* Botao e Skills lado a lado */
    align-items: center;
    gap: 15px;
    margin-top: 10px;
}

/* Bot칚o de Compra (Azul/Dourado estilo fish game) */
.buy-box {
    background: linear-gradient(to bottom, #4facfe 0%, #00f2fe 100%);
    width: 130px;
    height: 70px;
    border-radius: 10px;
    border: 4px solid #ffd700;
    box-shadow: 0 4px 0 #0056b3, 0 5px 10px rgba(0, 0, 0, 0.3);
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    transition: transform 0.1s;
}

.buy-box:active {
    transform: translateY(4px);
    box-shadow: 0 0 0 #0056b3;
}

.buy-box.locked {
    background: #555;
    border-color: #333;
    cursor: not-allowed;
    box-shadow: none;
}

.buy-action {
    font-family: 'Bangers', cursive;
    font-size: 1.5em;
    color: #fff;
    text-shadow: 1px 1px 0 #000;
    line-height: 1;
}

.buy-cost {
    font-family: 'Roboto', sans-serif;
    font-weight: bold;
    font-size: 1em;
    color: #fff4e6;
    text-shadow: 1px 1px 0 #000;
    margin-top: 2px;
}

/* Skills Container */
.upgrades-container {
    display: flex;
    gap: 8px;
}

.upgrade-box-new {
    width: 45px;
    height: 45px;
    background: #3e2723;
    border: 3px solid #5d4037;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5em;
    cursor: pointer;
    position: relative;
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.8);
}

.upgrade-box-new.locked {
    opacity: 0;
    pointer-events: none;
}

.upgrade-box-new.available {
    background: #5d4037;
    border-color: #ffd700;
    animation: pulseBorder 2s infinite;
}

.upgrade-box-new.bought {
    border-color: #00ff00;
}

.check-mark {
    position: absolute;
    top: -5px;
    right: -5px;
    color: #00ff00;
    font-size: 1em;
    text-shadow: 1px 1px 0 #000;
    font-weight: bold;
}

/* Imagem do Heroi (Full Body, Saindo pra fora se precisar) */
.hero-image-container {
    width: 200px;
    /* Largura fixa para imagem */
    height: 250px;
    margin-top: -60px;
    /* Puxa pra cima para sobrepor header se quiser, ou ajustar */
    margin-right: -10px;
    display: flex;
    align-items: flex-end;
    justify-content: center;
    pointer-events: none;
    /* Deixar clicar atrav칠s se precisar */
    overflow: hidden;
    /* Corta se for muito grande */
}

.hero-full-img {
    max-height: 100%;
    max-width: 100%;
    filter: drop-shadow(5px 5px 10px rgba(0, 0, 0, 0.4));
    transition: transform 0.2s;
}

.hero-item-new:hover .hero-full-img {
    transform: scale(1.05);
}

/* HERO CONTAINER (Holds Title + Card) */
.hero-card-split {
    background: transparent;
    border: none;
    box-shadow: none;
    margin-bottom: 30px;
    display: flex;
    flex-direction: column;
}

/* NAME HEADER OUTSIDE */
.hero-title-header {
    font-family: 'Shojumaru', cursive;
    font-size: 1.4em;
    /* Reduzido */
    color: #e65100;
    text-shadow: 2px 2px 0 #fff;
    text-align: left;
    /* Alinhado com a esquerda da caixa */
    margin-bottom: 2px;
    /* Espa칞o positivo, sem sobrepor */
    z-index: 10;
    position: relative;
    width: 100%;
    /* Permitir largura total */
    padding-left: 20px;
    white-space: nowrap;
    /* For칞ar uma linha */
    display: flex;
    align-items: center;
    gap: 10px;
}

.hero-element-icon {
    height: 28px;
    width: auto;
    filter: drop-shadow(0 2px 2px rgba(0, 0, 0, 0.3));
}

/* THE ACTUAL CARD BOX */
.hero-card-inner-split {
    background: #fff;
    border: 3px solid #8b4513;
    border-radius: 12px;
    display: flex;
    flex-direction: row;
    height: 190px;
    /* Altura reduzida para quadrado aproximado */
    position: relative;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    overflow: visible;
    /* Permitir que o overlay saia pra fora */
    z-index: 1;
    margin-top: 5px;
}

/* LEFT COLUMN (50%) */
.card-left-col {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    /* Imagem no topo */
    padding: 0;
    /* Sem padding para imagem encostar */
    background: #fff;
    border-right: none;
    /* Removida a linha pontilhada */
    position: relative;
    overflow: hidden;
    /* Cortar excesso */
}

.hero-image-wrapper {
    width: 100%;
    height: 100%;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    /* Alinhar topo */
    position: relative;
    padding: 0;
}

.hero-full-body-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: top center;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
    filter: drop-shadow(0 5px 5px rgba(0, 0, 0, 0.3));
    transition: transform 0.3s ease;
    /* Transi칞칚o mais suave */
    margin: 0;
    cursor: pointer;
}

.hero-full-body-img:hover {
    transform: scale(1.1);
    z-index: 10;
}

/* RIGHT COLUMN (50%) */
.card-right-col {
    flex: 1;
    display: flex;
    flex-direction: column;
    padding: 10px 15px;
    background: rgba(255, 255, 255, 0.9);
    border-top-right-radius: 8px;
    border-bottom-right-radius: 8px;
    justify-content: flex-start;
    gap: 8px;
    /* Espa칞o uniforme entre os elementos */
    position: relative;
}

.hero-level-display {
    font-family: 'Bangers', cursive;
    font-size: 2.2em;
    color: #333;
    border-bottom: 2px solid #ff6600;
    margin-bottom: 5px;
    text-align: right;
}

/* OVERLAY DETALHES (Preto com opacidade) Popup */
.hero-stats-overlay {
    position: absolute;
    top: -10px;
    /* Mais pra cima */
    right: -10px;
    /* Mais pra direita */
    width: 200px;
    height: auto;
    min-height: 60px;
    background: rgba(0, 0, 0, 0.9);
    color: #fff;
    padding: 15px;
    z-index: 100;
    opacity: 0;
    pointer-events: none;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    transform: translateY(10px);
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    border-radius: 8px;
    border: 1px solid #ff9800;
    font-family: 'Roboto', sans-serif;
    text-align: left;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);
}

/* Abrir ao passar o mouse apenas na Imagem ou no Bot칚o de Upgrade */
.hero-card-inner-split:hover .hero-stats-overlay {
    opacity: 0;
}

.hero-card-inner-split:has(.card-left-col:hover) .hero-stats-overlay,
.hero-card-inner-split:has(.hero-buy-btn:hover) .hero-stats-overlay {
    opacity: 1;
    transform: translateY(0);
}

.overlay-title {
    font-family: 'Shojumaru', cursive;
    color: #ff9800;
    font-size: 1.1em;
    margin-bottom: 8px;
    border-bottom: 1px solid #444;
    padding-bottom: 4px;
}

.stat-line {
    font-size: 1em;
    margin: 3px 0;
}

.stat-line strong {
    color: #ffd700;
}

.dps-increment {
    color: #4caf50;
    font-weight: bold;
    margin-left: 5px;
    text-shadow: 0 0 5px rgba(76, 175, 80, 0.5);
}

.stat-line-desc {
    font-size: 0.85em;
    color: #bbb;
    margin-top: 5px;
    line-height: 1.2;
}

hr {
    border: 0;
    border-top: 1px solid #444;
    margin: 8px 0;
}

.hero-skills-row {
    display: flex;
    gap: 12px;
    /* Mais espa칞o entre 칤cones */
    margin: 10px 0 10px 15px;
    /* Adicionado 15px na esquerda para chegar pra direita */
    min-height: 50px;
    align-items: center;
    justify-content: flex-start;
}

.skill-box {
    width: 45px;
    height: 45px;
    background: #1a1a1a;
    border-radius: 8px;
    border: 2px solid #5d4037;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    position: relative;
    overflow: visible;
    /* Permitir que o pergaminho ultrapasse */
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    transition: transform 0.1s;
    user-select: none;
    /* N칚o selecion치vel */
    outline: none;
    /* Sem outline */
}

.skill-box:hover:not(.locked) {
    transform: scale(1.1);
    z-index: 10;
}

.skill-img-icon {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 6px;
    /* Arredondar cantos da imagem */
    overflow: hidden;
    /* Cortar imagem nos cantos */
}

.skill-icon {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    overflow: hidden;
    /* Cortar conte칰do nos cantos arredondados */
}

.skill-box.locked {
    opacity: 0.3;
    filter: grayscale(1);
    cursor: pointer;
}

.skill-box.locked.affordable {
    opacity: 0.6;
    filter: grayscale(0.5);
    border-color: #ffd700;
    box-shadow: 0 0 8px rgba(255, 215, 0, 0.4);
}

.skill-box.available {
    background: #5d4037;
    border-color: #ffd700;
    animation: pulseBorder 1.5s infinite;
}

/* Miss칚o em andamento - opacidade intermedi치ria */
.skill-box.available.in-progress {
    opacity: 0.7;
    filter: brightness(0.8) saturate(0.8);
}

.skill-box.bought {
    border-color: #00ff00;
    cursor: pointer;
    /* Clic치vel para ver buffs no modal */
    user-select: none;
    /* N칚o selecion치vel */
    outline: none;
    /* Sem outline */
}

.skill-check {
    position: absolute;
    top: -8px;
    right: -8px;
    color: #00ff00;
    font-size: 1.2em;
    font-weight: bold;
    text-shadow: 1px 1px 0 #000;
}

/* 칈cone de miss칚o em andamento */
.skill-mission-active {
    position: absolute;
    top: -12px;
    /* Mais para cima para ultrapassar */
    right: -12px;
    /* Mais para direita para ultrapassar */
    font-size: 1.8em;
    /* Maior para ser mais vis칤vel */
    animation: scrollPulse 2s infinite;
    filter: drop-shadow(0 0 5px rgba(255, 215, 0, 1)) drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
    z-index: 100;
    /* Z-index muito alto para ficar acima de tudo */
    opacity: 1 !important;
    pointer-events: none;
    /* N칚o interferir com cliques */
}

/* Garantir que o pergaminho n칚o seja afetado pelo filtro da skill pai */
.skill-box.in-progress .skill-mission-active {
    opacity: 1 !important;
    filter: drop-shadow(0 0 5px rgba(255, 215, 0, 1)) drop-shadow(0 0 10px rgba(255, 215, 0, 0.8)) !important;
}

@keyframes scrollPulse {

    0%,
    100% {
        transform: scale(1) rotate(0deg);
    }

    50% {
        transform: scale(1.15) rotate(5deg);
    }
}

/* Tooltip das habilidades */
.skill-box .tooltip {
    visibility: hidden;
    opacity: 0;
    position: absolute;
    bottom: 120%;
    left: 50%;
    transform: translateX(-50%);
    background: rgba(0, 0, 0, 0.95);
    color: #fff;
    padding: 12px 16px;
    border-radius: 8px;
    border: 2px solid #ffd700;
    font-size: 0.9em;
    white-space: normal;
    /* Permitir quebras de linha */
    z-index: 1000;
    pointer-events: none;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.8);
    min-width: 200px;
    max-width: 300px;
    /* Largura m치xima */
    text-align: left;
    line-height: 1.4;
    /* Espa칞amento entre linhas */
    transition: opacity 0.2s, visibility 0.2s;
}

/* Seta do tooltip */
.skill-box .tooltip::after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    transform: translateX(-50%);
    border: 8px solid transparent;
    border-top-color: #ffd700;
}


/* Mostrar tooltip APENAS para skills completadas */
.skill-box.bought:hover .tooltip {
    visibility: visible !important;
    opacity: 1 !important;
}

/* Garantir que skills locked, available e in-progress N츾O mostrem tooltip */
.skill-box.locked:hover .tooltip,
.skill-box.available:hover .tooltip,
.skill-box.in-progress:hover .tooltip {
    visibility: hidden !important;
    opacity: 0 !important;
}

/* API Button at Bottom Right */
.hero-buy-btn {
    background: linear-gradient(to bottom, #ff9800 0%, #f57c00 100%);
    border: 2px solid #e65100;
    border-radius: 6px;
    padding: 5px 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 3px 0 #bf360c;
    transition: active 0.1s;
    margin-top: 5px;
}

.hero-buy-btn:active {
    transform: translateY(3px);
    box-shadow: none;
}

.hero-buy-btn.locked {
    background: #777;
    border-color: #555;
    box-shadow: none;
    cursor: not-allowed;
    justify-content: center;
    color: #ccc;
}

.buy-label {
    font-family: 'Bangers', cursive;
    color: white;
    font-size: 1.2em;
}

.buy-value {
    font-weight: bold;
    color: #fff;
    font-size: 1em;
}

.hero-buy-btn.disabled {
    background: #9e9e9e;
    border-color: #757575;
    cursor: not-allowed;
    box-shadow: none;
    opacity: 0.8;
}

/* Mobile Adjust */
@media (max-width: 900px) {
    .hero-card-split {
        height: auto;
        flex-direction: column;
    }

    .card-left-col {
        border-right: none;
        border-bottom: 2px dashed #dba669;
    }

    .hero-image-wrapper {
        min-height: 200px;
    }

    .hero-full-body-img {
        height: auto;
        max-height: 250px;
    }
}

/* ===== BACKPACK ICON ===== */
.backpack-icon {
    font-size: 1.2em;
    cursor: pointer;
    margin-left: 20px;
    display: inline-block;
    transition: transform 0.2s ease, filter 0.2s ease;
    filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.5));
}

.backpack-icon:hover {
    transform: scale(1.15) rotate(-5deg);
    filter: drop-shadow(3px 3px 6px rgba(139, 69, 19, 0.8));
}

.backpack-icon:active {
    transform: scale(1.05);
}

/* ===== MODAL OVERLAY ===== */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.85);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    backdrop-filter: blur(5px);
    animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

/* ===== BACKPACK MODAL ===== */
.backpack-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.85);
    backdrop-filter: blur(5px);
    z-index: 10000;
    display: none;
    align-items: center;
    justify-content: center;
}

.backpack-modal.active {
    display: flex;
}

.backpack-container {
    background: linear-gradient(135deg, #d4a574 0%, #c89860 50%, #b8885a 100%);
    border: 6px solid #8b6f47;
    border-radius: 20px;
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.8),
        inset 0 2px 10px rgba(255, 255, 255, 0.2);
    width: 90%;
    max-width: 900px;
    max-height: 85vh;
    overflow: hidden;
    position: relative;
    animation: modalSlideIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

@keyframes modalSlideIn {
    from {
        transform: scale(0.7);
        opacity: 0;
    }

    to {
        transform: scale(1);
        opacity: 1;
    }
}

.modal-header {
    background: linear-gradient(to bottom, #8b6f47, #6d5638);
    padding: 20px 30px;
    border-bottom: 4px solid #5d4a2f;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
}

.modal-header h2 {
    font-family: 'Shojumaru', cursive;
    font-size: 2.2em;
    color: #fff;
    text-shadow: 3px 3px 0 #000,
        -1px -1px 0 #000,
        1px -1px 0 #000,
        -1px 1px 0 #000,
        0 0 15px rgba(255, 215, 0, 0.5);
    margin: 0;
}

.modal-close {
    background: #d32f2f;
    border: 3px solid #8b0000;
    color: #fff;
    font-size: 1.8em;
    font-weight: bold;
    width: 45px;
    height: 45px;
    border-radius: 50%;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
    display: flex;
    align-items: center;
    justify-content: center;
}

.modal-close:hover {
    background: #ff5252;
    transform: rotate(90deg) scale(1.1);
    box-shadow: 0 6px 12px rgba(255, 0, 0, 0.6);
}

.modal-close:active {
    transform: rotate(90deg) scale(0.95);
}

.modal-body {
    padding: 30px;
    overflow-y: auto;
    max-height: calc(85vh - 100px);
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.1), rgba(0, 0, 0, 0.1));
}

/* ===== INVENTORY GRID ===== */
.inventory-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
    gap: 15px;
    padding: 10px;
}

.inventory-slot {
    width: 90px;
    height: 90px;
    background: linear-gradient(135deg, #8b0000, #a52a2a);
    border: 4px solid #5d0000;
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.6),
        0 4px 10px rgba(0, 0, 0, 0.5);
}

.inventory-slot:hover {
    transform: translateY(-5px) scale(1.05);
    box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.6),
        0 8px 20px rgba(255, 215, 0, 0.4);
    border-color: #ffd700;
}

.inventory-slot.empty::before {
    content: '游';
    font-size: 2.5em;
    opacity: 0.3;
    filter: grayscale(1);
}

.inventory-slot.has-item {
    background: linear-gradient(135deg, #1a472a, #2e7d32);
    border-color: #1b5e20;
}

.inventory-slot.has-item:hover {
    border-color: #4caf50;
}

.item-icon {
    font-size: 3em;
    filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.8));
}

.item-count {
    position: absolute;
    bottom: 5px;
    right: 8px;
    background: rgba(0, 0, 0, 0.85);
    color: #fff;
    font-size: 0.9em;
    font-weight: bold;
    padding: 2px 6px;
    border-radius: 8px;
    border: 2px solid #ffd700;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.6);
}

/* ===== ADMIN PANEL ===== */
#admin-trigger {
    position: fixed;
    bottom: 20px;
    right: 20px;
    width: 50px;
    height: 50px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: 3px solid #4a5568;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.8em;
    cursor: pointer;
    z-index: 8888;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
}

#admin-trigger:hover {
    transform: scale(1.15) rotate(90deg);
    box-shadow: 0 6px 25px rgba(102, 126, 234, 0.7);
}

.admin-modal {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: 6px solid #4a5568;
    border-radius: 20px;
    box-shadow: 0 15px 50px rgba(0, 0, 0, 0.8),
        inset 0 2px 10px rgba(255, 255, 255, 0.2);
    width: 90%;
    max-width: 500px;
    overflow: hidden;
    position: relative;
    animation: modalSlideIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.admin-input-group {
    display: flex;
    flex-direction: column;
    gap: 15px;
    padding: 10px;
}

.admin-input-group label {
    font-family: 'Shojumaru', cursive;
    font-size: 1.3em;
    color: #fff;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

.admin-input-group input {
    padding: 12px 15px;
    font-size: 1.2em;
    border: 3px solid #4a5568;
    border-radius: 10px;
    background: rgba(255, 255, 255, 0.95);
    color: #333;
    font-weight: bold;
    transition: all 0.3s ease;
}

.admin-input-group input:focus {
    outline: none;
    border-color: #ffd700;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
}

.admin-btn {
    padding: 15px 30px;
    font-size: 1.3em;
    font-weight: bold;
    background: linear-gradient(to bottom, #ffd700, #ffb700);
    border: 3px solid #8b6f00;
    border-radius: 12px;
    color: #000;
    cursor: pointer;
    transition: all 0.2s ease;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.5);
}

.admin-btn:hover {
    background: linear-gradient(to bottom, #ffed4e, #ffd700);
    transform: translateY(-2px);
    box-shadow: 0 6px 15px rgba(255, 215, 0, 0.6);
}

.admin-btn:active {
    transform: translateY(0);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.4);
}

/* Elemental Cycle Guide */
.elemental-cycle-guide {
    position: absolute;
    top: 100px;
    right: 20px;
    width: 250px;
    height: auto;
    z-index: 100;
    pointer-events: none;
    filter: drop-shadow(0 0 15px rgba(0, 0, 0, 0.6));
    opacity: 1;
    transition: opacity 0.3s ease;
}

.center-panel:hover .elemental-cycle-guide {
    opacity: 0.7;
}

/* Item Drop Notification - Redesenhada */
.item-drop-notification {
    position: fixed;
    bottom: 120px;
    right: 30px;
    background: linear-gradient(135deg, rgba(45, 27, 0, 0.95) 0%, rgba(93, 58, 26, 0.95) 100%);
    border: 3px solid #ffd700;
    border-radius: 10px;
    padding: 12px 18px;
    z-index: 10000;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.6), 0 0 20px rgba(255, 215, 0, 0.3);
    animation: dropSlideIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55), dropFadeOut 0.4s ease-in 2.6s forwards;
    pointer-events: none;
    display: flex;
    align-items: center;
    gap: 12px;
    max-width: 280px;
}

.item-drop-notification img {
    width: 45px;
    height: 45px;
    flex-shrink: 0;
    filter: drop-shadow(0 2px 6px rgba(255, 215, 0, 0.4));
}

.item-drop-notification .drop-content {
    display: flex;
    flex-direction: column;
    gap: 2px;
}

.item-drop-notification .drop-text {
    font-family: 'Bangers', cursive;
    font-size: 1.1em;
    color: #ffd700;
    text-shadow: 1px 1px 3px #000;
    letter-spacing: 0.5px;
    line-height: 1;
}

.item-drop-notification .item-name {
    font-family: 'Roboto', sans-serif;
    font-size: 0.95em;
    font-weight: 500;
    color: #f0e6d2;
    text-shadow: 1px 1px 2px #000;
    line-height: 1.2;
}

@keyframes dropSlideIn {
    0% {
        opacity: 0;
        transform: translateX(100px);
    }

    100% {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes dropFadeOut {
    0% {
        opacity: 1;
        transform: translateX(0);
    }

    100% {
        opacity: 0;
        transform: translateX(50px);
    }
}

/* Item Icon Image in Inventory */
.item-icon-img {
    max-width: 50px;
    max-height: 50px;
    width: auto;
    height: auto;
    object-fit: contain;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
}

/* ===== SISTEMA DE MOCHILA - DESIGN MODERNO E PROFISSIONAL ===== */

/* Modal Backdrop */
.backpack-modal {
    display: flex !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(4px);
    z-index: 99999 !important;
    justify-content: center !important;
    align-items: center !important;
    animation: fadeIn 0.2s ease-out;
    visibility: hidden;
    opacity: 0;
    transition: opacity 0.2s, visibility 0.2s;
}

.backpack-modal.active {
    visibility: visible;
    opacity: 1;
}

@keyframes fadeIn {
    from {
        opacity: 0;
    }

    to {
        opacity: 1;
    }
}

/* Container Principal */
.backpack-container {
    background: linear-gradient(145deg, #1a1a1a 0%, #2d2d2d 100%);
    border: 1px solid #404040;
    border-radius: 12px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 0.05);
    max-width: 700px;
    width: 90%;
    max-height: 85vh;
    overflow: hidden;
    animation: slideUp 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
    margin: auto;
}

@keyframes slideUp {
    from {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

/* Header */
.backpack-header {
    background: linear-gradient(135deg, #2a2a2a 0%, #1f1f1f 100%);
    border-bottom: 1px solid #404040;
    padding: 20px 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.backpack-title {
    display: flex;
    align-items: center;
    gap: 12px;
    font-family: 'Roboto', sans-serif;
    font-size: 1.4em;
    font-weight: 600;
    color: #e0e0e0;
    letter-spacing: 0.5px;
}

.close-backpack {
    background: transparent;
    border: none;
    color: #999;
    font-size: 1.8em;
    cursor: pointer;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 6px;
    transition: all 0.2s;
}

.close-backpack:hover {
    background: rgba(255, 255, 255, 0.05);
    color: #fff;
}

/* Body */
.backpack-body {
    padding: 25px;
    max-height: calc(85vh - 80px);
    overflow-y: auto;
}

.backpack-body::-webkit-scrollbar {
    width: 8px;
}

.backpack-body::-webkit-scrollbar-track {
    background: #1a1a1a;
    border-radius: 4px;
}

.backpack-body::-webkit-scrollbar-thumb {
    background: #404040;
    border-radius: 4px;
}

.backpack-body::-webkit-scrollbar-thumb:hover {
    background: #505050;
}

/* Grid de Invent치rio */
.inventory-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, 70px);
    gap: 10px;
    padding: 5px;
}

/* Slots */
.inventory-slot {
    width: 70px;
    height: 70px;
    background: linear-gradient(145deg, #242424 0%, #1a1a1a 100%);
    border: 1px solid #333;
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    position: relative;
    transition: all 0.2s;
    cursor: default;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.5);
    overflow: hidden;
}

.inventory-slot.empty {
    opacity: 0.4;
}

.inventory-slot.empty:hover {
    background: linear-gradient(145deg, #2a2a2a 0%, #202020 100%);
    border-color: #3a3a3a;
}

.inventory-slot.has-item {
    background: linear-gradient(145deg, #2d2d2d 0%, #232323 100%);
    border-color: #4a4a4a;
    opacity: 1;
    cursor: pointer;
}

.inventory-slot.has-item:hover {
    background: linear-gradient(145deg, #353535 0%, #2a2a2a 100%);
    border-color: #5a5a5a;
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.6), inset 0 1px 2px rgba(255, 255, 255, 0.05);
}

/* 칈cone do Item */
.item-icon {
    font-size: 2em;
    filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.5));
    max-width: 90%;
    max-height: 90%;
    line-height: 1;
}

/* Contador de Itens */
.item-count {
    position: absolute;
    bottom: 4px;
    right: 4px;
    background: rgba(0, 0, 0, 0.85);
    color: #fff;
    font-family: 'Roboto', sans-serif;
    font-size: 0.75em;
    font-weight: 600;
    padding: 2px 6px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
    line-height: 1;
}

/* 칈cone da Mochila no Header */
.backpack-icon {
    cursor: pointer;
    font-size: 0.9em;
    transition: transform 0.2s;
    display: inline-block;
    margin-left: 8px;
}

.backpack-icon:hover {
    transform: scale(1.15);
}

/* ===== ANIMA칂츾O DE DIAMANTES ===== */
.diamond-drop {
    position: absolute;
    font-size: 2em;
    pointer-events: none;
    z-index: 100;
    animation: diamondFall 1s ease-out forwards;
    filter: drop-shadow(0 0 8px rgba(0, 212, 255, 0.8));
}

@keyframes diamondFall {
    0% {
        transform: translateY(0) scale(1);
        opacity: 1;
    }

    50% {
        transform: translateY(-30px) scale(1.2);
        opacity: 1;
    }

    100% {
        transform: translateY(60px) scale(0.5);
        opacity: 0;
    }
}

/* ===== MODAL DE MISS츾O ===== */
.mission-container {
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
    border: 4px solid #00d4ff;
    border-radius: 20px;
    box-shadow: 0 15px 50px rgba(0, 212, 255, 0.5),
        inset 0 2px 10px rgba(0, 212, 255, 0.2);
    width: 90%;
    max-width: 700px;
    max-height: 85vh;
    overflow-y: auto;
    position: relative;
    animation: modalSlideIn 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

.mission-header {
    background: linear-gradient(135deg, #00d4ff 0%, #0088cc 100%);
    padding: 15px 20px;
    border-radius: 16px 16px 0 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-bottom: 3px solid #00ffff;
}

.mission-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-family: 'Bangers', cursive;
    font-size: 1.8em;
    color: #fff;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

.close-mission {
    background: rgba(255, 0, 0, 0.8);
    border: 2px solid #fff;
    border-radius: 50%;
    width: 35px;
    height: 35px;
    font-size: 1.2em;
    color: #fff;
    cursor: pointer;
    transition: all 0.2s;
}

.close-mission:hover {
    background: rgba(255, 0, 0, 1);
    transform: scale(1.1);
}

.mission-body {
    padding: 20px;
}

.mission-details {
    color: #fff;
}

.mission-icon {
    font-size: 4em;
    text-align: center;
    margin-bottom: 10px;
    filter: drop-shadow(0 0 10px rgba(0, 212, 255, 0.8));
}

.mission-details h3 {
    font-family: 'Bangers', cursive;
    font-size: 2em;
    text-align: center;
    color: #00d4ff;
    margin: 10px 0;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

.mission-subtitle {
    text-align: center;
    font-style: italic;
    color: #aaa;
    margin-bottom: 20px;
}

.mission-section {
    background: rgba(0, 0, 0, 0.3);
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 12px;
    border-left: 4px solid #00d4ff;
    border-top: 4px solid #00d4ff;
}

.mission-section h4 {
    margin: 0 0 8px 0;
    color: #00d4ff;
    font-size: 1.1em;
}

.mission-section p {
    margin: 0;
    line-height: 1.6;
}

/* Se칞칚o de Efeitos - Tem치tica Vermelha */
.mission-section-effect {
    background: rgba(0, 0, 0, 0.3);
    padding: 12px;
    border-radius: 8px;
    margin-bottom: 12px;
    border-left: 4px solid #ff4444;
    border-top: 4px solid #ff4444;
}

.mission-section-effect h4 {
    margin: 0 0 8px 0;
    color: #ff4444;
    font-size: 1.1em;
}

.mission-section-effect p {
    margin: 0;
    line-height: 1.6;
}

.mission-section.bonus {
    border-left-color: #6c9;
    border-top-color: #6c9;
    background: rgba(102, 204, 153, 0.15);
}

.mission-section.bonus h4 {
    color: #6c9;
}

.mission-section.objective {
    border-left-color: #f9c74f;
    border-top-color: #f9c74f;
    background: rgba(249, 199, 79, 0.15);
}

.mission-section.objective h4 {
    color: #f9c74f;
}

.mission-section.reward {
    border-left-color: #b565d8;
    border-top-color: #b565d8;
    background: rgba(181, 101, 216, 0.15);
}

.mission-section.reward h4 {
    color: #b565d8;
}

.mission-cost {
    background: linear-gradient(135deg, rgba(0, 212, 255, 0.2), rgba(0, 136, 204, 0.2));
    padding: 15px;
    border-radius: 10px;
    margin: 20px 0 10px 0;
    text-align: center;
    border: 2px solid #00d4ff;
}

.cost-label {
    display: block;
    font-size: 0.9em;
    color: #aaa;
    margin-bottom: 5px;
}

.cost-value {
    display: block;
    font-family: 'Bangers', cursive;
    font-size: 2em;
    color: #00d4ff;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
}

.player-diamonds {
    text-align: center;
    font-size: 1.1em;
    margin-bottom: 20px;
}

.player-diamonds .enough {
    color: #00ff00;
    font-weight: bold;
}

.player-diamonds .not-enough {
    color: #ff0000;
    font-weight: bold;
}

.mission-actions {
    display: flex;
    justify-content: center;
    margin-top: 20px;
}

.mission-btn {
    padding: 12px 40px;
    font-family: 'Bangers', cursive;
    font-size: 1.3em;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.2s;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
}

.mission-btn.purchase {
    background: linear-gradient(135deg, #00ff00, #00aa00);
    color: #fff;
    border: 2px solid #00ff00;
}

.mission-btn.purchase:hover:not(:disabled) {
    background: linear-gradient(135deg, #00ff00, #00cc00);
    transform: scale(1.05);
    box-shadow: 0 0 20px rgba(0, 255, 0, 0.6);
}

.mission-btn.purchase:disabled {
    background: #555;
    border-color: #777;
    color: #999;
    cursor: not-allowed;
    opacity: 0.5;
}

/* Estilos para Miss칚o Lend치ria (Skill 4) */
.mission-part {
    background: rgba(0, 0, 0, 0.3);
    padding: 15px;
    border-radius: 8px;
    margin: 10px 0;
    border: 2px solid #8b4513;
}

.mission-part.completed {
    background: rgba(0, 150, 0, 0.2);
    border-color: #00ff00;
}

.mission-part h4 {
    margin: 0 0 10px 0;
    color: #ffd700;
    font-family: 'Bangers', cursive;
    font-size: 1.3em;
}

.mission-part p {
    margin: 5px 0;
    color: #fff;
}

.progress-bar {
    background: rgba(0, 0, 0, 0.5);
    border-radius: 10px;
    height: 30px;
    margin: 10px 0;
    position: relative;
    overflow: hidden;
    border: 2px solid #8b4513;
}

.progress-fill {
    background: linear-gradient(90deg, #00ff00, #00aa00);
    height: 100%;
    border-radius: 8px;
    transition: width 0.3s ease;
}

.progress-text {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-weight: bold;
    color: #fff;
    text-shadow: 1px 1px 2px #000;
    font-family: 'Bangers', cursive;
    font-size: 1.1em;
}

.complete-part-btn {
    background: linear-gradient(135deg, #00ff00, #00aa00);
    color: #000;
    border: 2px solid #00ff00;
    padding: 10px 20px;
    font-family: 'Bangers', cursive;
    font-size: 1.2em;
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.2s;
    margin: 10px 0;
}

.complete-part-btn:hover:not(:disabled) {
    background: linear-gradient(135deg, #00ff44, #00cc00);
    transform: scale(1.05);
    box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
}

.complete-part-btn:disabled {
    background: #555;
    border-color: #777;
    color: #999;
    cursor: not-allowed;
    opacity: 0.5;
}

.mission-section.legendary {
    background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 140, 0, 0.2));
    border: 2px solid #ffd700;
    box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
}

/* ========================================
   SKILL BOX AFFORDABLE (DIAMANTES DISPON칈VEIS)
   ======================================== */

.skill-box.affordable {
    background: linear-gradient(135deg, rgba(255, 220, 0, 0.4), rgba(255, 200, 0, 0.35)) !important;
    border: 2px solid rgba(255, 200, 0, 0.8) !important;
    box-shadow: 0 0 15px rgba(255, 200, 0, 0.5), inset 0 0 20px rgba(255, 220, 0, 0.3) !important;
    animation: pulseGlow 2s ease-in-out infinite;
}

.skill-box.affordable:hover {
    background: linear-gradient(135deg, rgba(255, 220, 0, 0.5), rgba(255, 200, 0, 0.45)) !important;
    box-shadow: 0 0 20px rgba(255, 200, 0, 0.7), inset 0 0 25px rgba(255, 220, 0, 0.4) !important;
    transform: scale(1.05);
}

@keyframes pulseGlow {

    0%,
    100% {
        box-shadow: 0 0 15px rgba(255, 200, 0, 0.5), inset 0 0 20px rgba(255, 220, 0, 0.3);
    }

    50% {
        box-shadow: 0 0 25px rgba(255, 200, 0, 0.7), inset 0 0 30px rgba(255, 220, 0, 0.4);
    }
}

/* Hero Stats Overlay - Mostrar apenas no hover do bot칚o UPGRADE */
.hero-stats-overlay {
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;
}

.card-right-col:has(.hero-buy-btn:hover)~.hero-stats-overlay {
    opacity: 1;
}